{
	"$schema": "./node_modules/lefthook/schema.json",
	"pre-commit": {
		"piped": true,
		"jobs": [
			{
				"name": "generate-routes",
				"glob": "src/routes/**/*.ts",
				"run": "bun scripts/generate-routes.ts --fix && git add src/routes/index.ts"
			},
			{
				"name": "generate-client",
				"glob": "src/routes/**/*.ts",
				"run": "bun scripts/generate-client.ts --fix && git add src/client.ts"
			},
			{
				"name": "check-route-paths",
				"glob": "src/routes/**/*.ts",
				"run": "bun scripts/fix-route-paths.ts"
			},
			{
				"name": "oxlint",
				"glob": "*.{js,ts,cjs,mjs,jsx,tsx}",
				"run": "bun oxlint --fix --max-warnings=0 --type-aware --type-check {staged_files}",
				"stage_fixed": true
			},
			{
				"name": "oxfmt",
				"glob": "*",
				"run": "bun oxfmt --no-error-on-unmatched-pattern {staged_files}",
				"stage_fixed": true
			}
		]
	},
	"pre-push": {
		"parallel": true,
		"jobs": [
			{
				"name": "knip",
				"run": "bun run knip"
			},
			{
				"name": "lockfile-sync-check",
				"glob": "{package.json,bun.lock}",
				"run": "bun install --frozen-lockfile"
			},
			{
				"name": "lint-on-lockfile-change",
				"glob": "bun.lock",
				"run": "bun run lint"
			},
			{
				"name": "test-on-lockfile-change",
				"glob": "bun.lock",
				"run": "bun run test"
			}
		]
	}
}
